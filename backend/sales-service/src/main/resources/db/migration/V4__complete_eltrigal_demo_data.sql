-- =====================================================
-- V4: Complete Demo Data for El Trigal
-- Cash sessions, sales, items, payments
-- Data for dashboard, earnings, and reports
-- UUIDs use valid hex: c5=sessions, 5a=sales, 51=items, 5b=payments
-- =====================================================

-- Fix branch_id in cash_registers (V2 used wrong IDs)
UPDATE cash_registers SET branch_id = 'b1000000-0000-0000-0000-000000000001' 
WHERE id = 'ca100000-0000-0000-0000-000000000001';
UPDATE cash_registers SET branch_id = 'b1000000-0000-0000-0000-000000000001' 
WHERE id = 'ca100000-0000-0000-0000-000000000002';

-- =====================================================
-- CASH SESSIONS - Last 7 days for El Trigal
-- =====================================================
INSERT INTO cash_sessions (id, tenant_id, register_id, user_id, monto_inicial, monto_final, monto_teorico, diferencia, estado, apertura_at, cierre_at, created_at) VALUES
-- Today - OPEN session (admin user Carlos)
('c5100000-0000-0000-0000-000000000001', 'a1000000-0000-0000-0000-000000000001', 'ca100000-0000-0000-0000-000000000001', 'c1000000-0000-0000-0000-000000000001', 50000, NULL, NULL, NULL, 'ABIERTA', CURRENT_DATE + TIME '08:00:00', NULL, NOW()),

-- Yesterday - CLOSED session (cajero Juan)
('c5100000-0000-0000-0000-000000000002', 'a1000000-0000-0000-0000-000000000001', 'ca100000-0000-0000-0000-000000000001', 'c1000000-0000-0000-0000-000000000003', 50000, 285000, 287500, -2500, 'CERRADA', CURRENT_DATE - INTERVAL '1 day' + TIME '08:00:00', CURRENT_DATE - INTERVAL '1 day' + TIME '20:00:00', CURRENT_DATE - INTERVAL '1 day'),

-- 2 days ago - CLOSED
('c5100000-0000-0000-0000-000000000003', 'a1000000-0000-0000-0000-000000000001', 'ca100000-0000-0000-0000-000000000001', 'c1000000-0000-0000-0000-000000000003', 50000, 195000, 195000, 0, 'CERRADA', CURRENT_DATE - INTERVAL '2 days' + TIME '08:00:00', CURRENT_DATE - INTERVAL '2 days' + TIME '20:00:00', CURRENT_DATE - INTERVAL '2 days'),

-- 3 days ago - CLOSED
('c5100000-0000-0000-0000-000000000004', 'a1000000-0000-0000-0000-000000000001', 'ca100000-0000-0000-0000-000000000001', 'c1000000-0000-0000-0000-000000000003', 50000, 322000, 320000, 2000, 'CERRADA', CURRENT_DATE - INTERVAL '3 days' + TIME '08:00:00', CURRENT_DATE - INTERVAL '3 days' + TIME '20:00:00', CURRENT_DATE - INTERVAL '3 days');

-- =====================================================
-- SALES - Mix of PENDING, COMPLETADA (approved), ANULADA
-- =====================================================
INSERT INTO sales (id, tenant_id, session_id, numero, customer_nombre, subtotal, descuento, impuestos, total, estado, aprobada_at, aprobada_por, created_at, created_by) VALUES
-- TODAY - PENDING sales (need approval in dashboard)
('5a100000-0000-0000-0000-000000000001', 'a1000000-0000-0000-0000-000000000001', 'c5100000-0000-0000-0000-000000000001', 'V-2024-0001', 'María González', 15000, 0, 2850, 17850, 'PENDIENTE', NULL, NULL, NOW() - INTERVAL '2 hours', 'c1000000-0000-0000-0000-000000000001'),
('5a100000-0000-0000-0000-000000000002', 'a1000000-0000-0000-0000-000000000001', 'c5100000-0000-0000-0000-000000000001', 'V-2024-0002', 'Pedro Soto', 8500, 500, 1520, 9520, 'PENDIENTE', NULL, NULL, NOW() - INTERVAL '1 hour', 'c1000000-0000-0000-0000-000000000001'),
('5a100000-0000-0000-0000-000000000003', 'a1000000-0000-0000-0000-000000000001', 'c5100000-0000-0000-0000-000000000001', 'V-2024-0003', NULL, 3200, 0, 608, 3808, 'PENDIENTE', NULL, NULL, NOW() - INTERVAL '30 minutes', 'c1000000-0000-0000-0000-000000000001'),

-- TODAY - APPROVED sales
('5a100000-0000-0000-0000-000000000004', 'a1000000-0000-0000-0000-000000000001', 'c5100000-0000-0000-0000-000000000001', 'V-2024-0004', 'Ana Martínez', 25000, 2000, 4370, 27370, 'COMPLETADA', NOW() - INTERVAL '3 hours', 'c1000000-0000-0000-0000-000000000002', NOW() - INTERVAL '4 hours', 'c1000000-0000-0000-0000-000000000001'),
('5a100000-0000-0000-0000-000000000005', 'a1000000-0000-0000-0000-000000000001', 'c5100000-0000-0000-0000-000000000001', 'V-2024-0005', NULL, 12500, 0, 2375, 14875, 'COMPLETADA', NOW() - INTERVAL '2 hours', 'c1000000-0000-0000-0000-000000000002', NOW() - INTERVAL '3 hours', 'c1000000-0000-0000-0000-000000000001'),

-- YESTERDAY - All APPROVED
('5a100000-0000-0000-0000-000000000010', 'a1000000-0000-0000-0000-000000000001', 'c5100000-0000-0000-0000-000000000002', 'V-2024-0010', 'Luis Pérez', 45000, 5000, 7600, 47600, 'COMPLETADA', CURRENT_DATE - INTERVAL '1 day' + TIME '15:00:00', 'c1000000-0000-0000-0000-000000000002', CURRENT_DATE - INTERVAL '1 day' + TIME '10:00:00', 'c1000000-0000-0000-0000-000000000003'),
('5a100000-0000-0000-0000-000000000011', 'a1000000-0000-0000-0000-000000000001', 'c5100000-0000-0000-0000-000000000002', 'V-2024-0011', NULL, 18000, 0, 3420, 21420, 'COMPLETADA', CURRENT_DATE - INTERVAL '1 day' + TIME '16:00:00', 'c1000000-0000-0000-0000-000000000002', CURRENT_DATE - INTERVAL '1 day' + TIME '11:30:00', 'c1000000-0000-0000-0000-000000000003'),
('5a100000-0000-0000-0000-000000000012', 'a1000000-0000-0000-0000-000000000001', 'c5100000-0000-0000-0000-000000000002', 'V-2024-0012', 'Carmen Rojas', 32000, 2000, 5700, 35700, 'COMPLETADA', CURRENT_DATE - INTERVAL '1 day' + TIME '17:00:00', 'c1000000-0000-0000-0000-000000000002', CURRENT_DATE - INTERVAL '1 day' + TIME '14:00:00', 'c1000000-0000-0000-0000-000000000003'),
('5a100000-0000-0000-0000-000000000013', 'a1000000-0000-0000-0000-000000000001', 'c5100000-0000-0000-0000-000000000002', 'V-2024-0013', NULL, 8500, 0, 1615, 10115, 'COMPLETADA', CURRENT_DATE - INTERVAL '1 day' + TIME '18:00:00', 'c1000000-0000-0000-0000-000000000002', CURRENT_DATE - INTERVAL '1 day' + TIME '16:00:00', 'c1000000-0000-0000-0000-000000000003'),

-- 2 DAYS AGO
('5a100000-0000-0000-0000-000000000020', 'a1000000-0000-0000-0000-000000000001', 'c5100000-0000-0000-0000-000000000003', 'V-2024-0020', NULL, 55000, 5000, 9500, 59500, 'COMPLETADA', CURRENT_DATE - INTERVAL '2 days' + TIME '12:00:00', 'c1000000-0000-0000-0000-000000000002', CURRENT_DATE - INTERVAL '2 days' + TIME '09:00:00', 'c1000000-0000-0000-0000-000000000003'),
('5a100000-0000-0000-0000-000000000021', 'a1000000-0000-0000-0000-000000000001', 'c5100000-0000-0000-0000-000000000003', 'V-2024-0021', 'Roberto Silva', 22000, 0, 4180, 26180, 'COMPLETADA', CURRENT_DATE - INTERVAL '2 days' + TIME '14:00:00', 'c1000000-0000-0000-0000-000000000002', CURRENT_DATE - INTERVAL '2 days' + TIME '11:00:00', 'c1000000-0000-0000-0000-000000000003'),

-- 3 DAYS AGO - Higher volume day
('5a100000-0000-0000-0000-000000000030', 'a1000000-0000-0000-0000-000000000001', 'c5100000-0000-0000-0000-000000000004', 'V-2024-0030', NULL, 42000, 2000, 7600, 47600, 'COMPLETADA', CURRENT_DATE - INTERVAL '3 days' + TIME '11:00:00', 'c1000000-0000-0000-0000-000000000002', CURRENT_DATE - INTERVAL '3 days' + TIME '09:00:00', 'c1000000-0000-0000-0000-000000000003'),
('5a100000-0000-0000-0000-000000000031', 'a1000000-0000-0000-0000-000000000001', 'c5100000-0000-0000-0000-000000000004', 'V-2024-0031', 'Elena Torres', 65000, 5000, 11400, 71400, 'COMPLETADA', CURRENT_DATE - INTERVAL '3 days' + TIME '13:00:00', 'c1000000-0000-0000-0000-000000000002', CURRENT_DATE - INTERVAL '3 days' + TIME '10:30:00', 'c1000000-0000-0000-0000-000000000003'),
('5a100000-0000-0000-0000-000000000032', 'a1000000-0000-0000-0000-000000000001', 'c5100000-0000-0000-0000-000000000004', 'V-2024-0032', NULL, 18500, 0, 3515, 22015, 'COMPLETADA', CURRENT_DATE - INTERVAL '3 days' + TIME '15:00:00', 'c1000000-0000-0000-0000-000000000002', CURRENT_DATE - INTERVAL '3 days' + TIME '13:00:00', 'c1000000-0000-0000-0000-000000000003'),
('5a100000-0000-0000-0000-000000000033', 'a1000000-0000-0000-0000-000000000001', 'c5100000-0000-0000-0000-000000000004', 'V-2024-0033', 'José Muñoz', 35000, 3000, 6080, 38080, 'COMPLETADA', CURRENT_DATE - INTERVAL '3 days' + TIME '17:00:00', 'c1000000-0000-0000-0000-000000000002', CURRENT_DATE - INTERVAL '3 days' + TIME '15:30:00', 'c1000000-0000-0000-0000-000000000003');

-- =====================================================
-- SALE_ITEMS - Products sold (using El Trigal product variants)
-- =====================================================
INSERT INTO sale_items (id, sale_id, variant_id, product_sku, product_nombre, cantidad, precio_unitario, descuento, impuesto_porcentaje, impuesto_monto, subtotal, total) VALUES
-- Sale 1 (pending) - Marraquetas + Torta
('51100000-0000-0000-0000-000000000001', '5a100000-0000-0000-0000-000000000001', 'f1100000-0000-0000-0000-000000000001', 'PAN-MAR-001', 'Marraqueta', 10, 150, 0, 19, 285, 1500, 1785),
('51100000-0000-0000-0000-000000000002', '5a100000-0000-0000-0000-000000000001', 'f110000b-0000-0000-0000-000000000011', 'TOR-CHO-001', 'Torta de Chocolate', 1, 18990, 0, 19, 3608, 18990, 22598),

-- Sale 2 (pending) - Empanadas + Café
('51100000-0000-0000-0000-000000000003', '5a100000-0000-0000-0000-000000000002', 'f1100011-0000-0000-0000-000000000017', 'EMP-PIN-001', 'Empanada de Pino', 3, 2500, 500, 19, 1330, 7500, 8330),
('51100000-0000-0000-0000-000000000004', '5a100000-0000-0000-0000-000000000002', 'f1100019-0000-0000-0000-000000000025', 'CAF-EXP-001', 'Café Espresso', 2, 1200, 0, 19, 456, 2400, 2856),

-- Sale 3 (pending) - Hallullas
('51100000-0000-0000-0000-000000000005', '5a100000-0000-0000-0000-000000000003', 'f1100000-0000-0000-0000-000000000002', 'PAN-HAL-001', 'Hallulla', 16, 200, 0, 19, 608, 3200, 3808),

-- Sale 4 (approved today) - Mixed products
('51100000-0000-0000-0000-000000000006', '5a100000-0000-0000-0000-000000000004', 'f110000c-0000-0000-0000-000000000012', 'TOR-TCS-001', 'Torta Tres Leches', 1, 16990, 2000, 19, 2848, 14990, 17838),
('51100000-0000-0000-0000-000000000007', '5a100000-0000-0000-0000-000000000004', 'f1100015-0000-0000-0000-000000000021', 'GAL-AVE-001', 'Galletas de Avena', 3, 1990, 0, 19, 1134, 5970, 7104),

-- Sale 5 (approved today)
('51100000-0000-0000-0000-000000000008', '5a100000-0000-0000-0000-000000000005', 'f1100000-0000-0000-0000-000000000005', 'PAN-AMA-001', 'Pan Amasado', 20, 350, 0, 19, 1330, 7000, 8330),
('51100000-0000-0000-0000-000000000009', '5a100000-0000-0000-0000-000000000005', 'f110001b-0000-0000-0000-000000000027', 'CAP-REG-001', 'Capuccino', 3, 2200, 0, 19, 1254, 6600, 7854),

-- Yesterday sales items
('51100000-0000-0000-0000-000000000010', '5a100000-0000-0000-0000-000000000010', 'f110000b-0000-0000-0000-000000000011', 'TOR-CHO-001', 'Torta de Chocolate', 2, 18990, 5000, 19, 6264, 32980, 39244),
('51100000-0000-0000-0000-000000000011', '5a100000-0000-0000-0000-000000000011', 'f1100000-0000-0000-0000-000000000001', 'PAN-MAR-001', 'Marraqueta', 50, 150, 0, 19, 1425, 7500, 8925),
('51100000-0000-0000-0000-000000000012', '5a100000-0000-0000-0000-000000000012', 'f110000d-0000-0000-0000-000000000013', 'KUC-MAN-001', 'Kuchen de Manzana', 3, 8990, 2000, 19, 4824, 24970, 29794);

-- =====================================================
-- SALE_PAYMENTS - Payment methods
-- =====================================================
INSERT INTO sale_payments (id, sale_id, medio, monto, referencia, created_at) VALUES
-- Today's approved sales payments
('5b100000-0000-0000-0000-000000000004', '5a100000-0000-0000-0000-000000000004', 'EFECTIVO', 27370, NULL, NOW() - INTERVAL '4 hours'),
('5b100000-0000-0000-0000-000000000005', '5a100000-0000-0000-0000-000000000005', 'DEBITO', 14875, 'TXN-1234', NOW() - INTERVAL '3 hours'),

-- Yesterday
('5b100000-0000-0000-0000-000000000010', '5a100000-0000-0000-0000-000000000010', 'EFECTIVO', 30000, NULL, CURRENT_DATE - INTERVAL '1 day' + TIME '10:00:00'),
('5b100000-0000-0000-0000-000000000015', '5a100000-0000-0000-0000-000000000010', 'DEBITO', 17600, 'TXN-5678', CURRENT_DATE - INTERVAL '1 day' + TIME '10:00:00'),
('5b100000-0000-0000-0000-000000000011', '5a100000-0000-0000-0000-000000000011', 'EFECTIVO', 21420, NULL, CURRENT_DATE - INTERVAL '1 day' + TIME '11:30:00'),
('5b100000-0000-0000-0000-000000000012', '5a100000-0000-0000-0000-000000000012', 'CREDITO', 35700, 'TXN-9012', CURRENT_DATE - INTERVAL '1 day' + TIME '14:00:00'),
('5b100000-0000-0000-0000-000000000013', '5a100000-0000-0000-0000-000000000013', 'EFECTIVO', 10115, NULL, CURRENT_DATE - INTERVAL '1 day' + TIME '16:00:00'),

-- 2 days ago
('5b100000-0000-0000-0000-000000000020', '5a100000-0000-0000-0000-000000000020', 'TRANSFERENCIA', 59500, 'TRANS-001', CURRENT_DATE - INTERVAL '2 days' + TIME '09:00:00'),
('5b100000-0000-0000-0000-000000000021', '5a100000-0000-0000-0000-000000000021', 'EFECTIVO', 26180, NULL, CURRENT_DATE - INTERVAL '2 days' + TIME '11:00:00'),

-- 3 days ago
('5b100000-0000-0000-0000-000000000030', '5a100000-0000-0000-0000-000000000030', 'EFECTIVO', 47600, NULL, CURRENT_DATE - INTERVAL '3 days' + TIME '09:00:00'),
('5b100000-0000-0000-0000-000000000031', '5a100000-0000-0000-0000-000000000031', 'DEBITO', 71400, 'TXN-3456', CURRENT_DATE - INTERVAL '3 days' + TIME '10:30:00'),
('5b100000-0000-0000-0000-000000000032', '5a100000-0000-0000-0000-000000000032', 'EFECTIVO', 22015, NULL, CURRENT_DATE - INTERVAL '3 days' + TIME '13:00:00'),
('5b100000-0000-0000-0000-000000000033', '5a100000-0000-0000-0000-000000000033', 'CREDITO', 38080, 'TXN-7890', CURRENT_DATE - INTERVAL '3 days' + TIME '15:30:00');
